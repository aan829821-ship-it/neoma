<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEOMA | نيوما</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: radial-gradient(circle at center, #0d1117 0%, #010409 100%);
            min-height: 100vh;
        }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body class="text-gray-200 flex flex-col items-center p-4">

    <header class="text-center my-8">
        <h1 class="text-5xl font-thin tracking-[12px] text-blue-500 opacity-80">NEOMA</h1>
        <p class="text-[10px] text-gray-500 mt-2 tracking-[4px]">الذكاء الأخلاقي المتوازن</p>
    </header>

    <div id="chat-box" class="w-full max-w-xl glass border border-gray-800 rounded-3xl h-[450px] overflow-y-auto p-6 flex flex-col gap-4 custom-scrollbar shadow-2xl">
        <div class="text-center text-gray-600 text-[10px] py-2 border-b border-gray-900 mb-2">جلسة اتصال آمنة</div>
        <div class="bg-blue-900/10 border-r-4 border-blue-500 p-3 rounded-lg self-start max-w-[85%]">
            <p class="text-sm">مرحباً بك.. أنا نيوما. أنا هنا لأذكرك بالقيم والجمال في هذا العالم الرقمي. كيف حال روحك اليوم؟</p>
        </div>
    </div>

    <div class="w-full max-w-xl mt-6">
        <div class="text-center mb-3">
            <span id="timer" class="text-yellow-600/70 text-xs font-mono tracking-widest uppercase">الوقت المتبقي: 60:00</span>
        </div>
        
        <div class="flex gap-2 bg-gray-900/80 p-2 rounded-2xl border border-gray-800 shadow-inner">
            <input type="text" id="user-input" placeholder="تحدث بصدق..." 
                   class="flex-1 bg-transparent border-none p-3 outline-none text-sm text-gray-200">
            <button onclick="handleAction()" id="send-btn" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl transition-all active:scale-95 text-sm">
                إرسال
            </button>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chat-box');
        const userInput = document.getElementById('user-input');
        const timerLabel = document.getElementById('timer');

        // 1. نظام المؤقت الذكي (60 دقيقة)
        let seconds = 3600;
        const countdown = setInterval(() => {
            let m = Math.floor(seconds / 60);
            let s = seconds % 60;
            timerLabel.innerText = `الوقت المتبقي: ${m}:${s < 10 ? '0' : ''}${s}`;
            if (seconds <= 0) {
                clearInterval(countdown);
                finishSession();
            }
            seconds--;
        }, 1000);

        // 2. معالجة الإرسال
        function handleAction() {
            const text = userInput.value.trim();
            if (!text) return;

            // إضافة رسالة المستخدم
            appendMessage('أنت', text, 'self-end bg-gray-800 text-gray-300 border border-gray-700');
            userInput.value = '';

            // رد نيوما بعد ثانية
            setTimeout(() => {
                const responses = [
                    "جميل ما قلته، هل تشعر بالراحة الآن؟",
                    "نيوما تفهمك.. تذكر دائماً أن لك أثراً طيباً.",
                    "تأمل في كلماتك، فهي مرآة لداخلك.",
                    "هل ساعدت أحداً بكلماتك اليوم؟"
                ];
                const reply = responses[Math.floor(Math.random() * responses.length)];
                appendMessage('نيوما', reply, 'self-start bg-blue-900/10 border-r-4 border-blue-500');
            }, 800);
        }

        // 3. وظيفة إضافة الرسائل
        function appendMessage(sender, text, styles) {
            const div = document.createElement('div');
            div.className = `p-3 rounded-2xl max-w-[85%] text-sm shadow-sm animate-in fade-in duration-500 ${styles}`;
            div.innerHTML = `<span class="block text-[9px] opacity-40 mb-1">${sender}</span>${text}`;
            chatBox.appendChild(div);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // 4. إنهاء الجلسة
        function finishSession() {
            userInput.disabled = true;
            document.getElementById('send-btn').disabled = true;
            appendMessage('نيوما', "انتهى وقتنا الرقمي. اذهب الآن لعائلتك، نيوما فخورة بك.", 'w-full text-center bg-yellow-900/20 text-yellow-500 border-none');
        }

        // دعم زر Enter
        userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") handleAction(); });
    </script>
</body>
</html>
